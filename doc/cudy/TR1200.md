<h1 align="center"> Cudy TR1200 </h1>

```Sh
.______            __  
|      |.--.--.-- |  |.--.--.  
|   ---||  |  | _ |  ||  |  | 
|______||_____|______||___  |  
. OpenWrt firmwares   |_____|
```

[OpenWRT page](https://openwrt.org/toh/cudy/tr1200)

<img src="https://www.cudy.com/cdn/shop/files/TR1200.png" width="500" align="center">

| Name      | Spec                                        |
| --------- | ------------------------------------------- |
| CPU       | MediaTek MT7628AN x 1 @ 580 Mhz (MIPS)      |
| ROM       | 16MB SPI NAND                               |
| RAM       | 128MB DDR3                                  |
| WLAN      | MediaTek MT7613BEN (Wi-Fi 5)                |
| UBS       | + (2.0)                                     |
| Power     | PD 10W via USB Type-C                       |
| LAN       | 2x 1Gpbs MT7628AN                           |
| Dimension | 15 by 15 by 10 cm                           |
|           |                                             |

## Short Description

entry-level thing:
- only Wi-Fi 5 and 1Gbps
- 10 watts is crazy
- USB 2.0 *might* not be enough for chonky modems
- 16MB of ROM is not enough (u-boot layout might help)
- 1 MIPS core is not enough
- yet, RAM is plenty
- small

## How2

1. OpenWRT Transition 
	1. update [stock firmware](https://www.cudy.com/pages/download-center/tr3000-1-0) to latest version
	2. use special [Cudy Intermediary OpenWRT firmware](https://drive.google.com/drive/folders/1BKVarlwlNxf7uJUtRhuMGUqeCa5KpMnj?usp=sharing&pli=1) to sysupgrade to OpenWRT
	3. download latest stable build for your OpenWRT of choice (for e.g. https://firmware-selector.openwrt.org/?version=24.10.2&target=mediatek%2Ffilogic&id=cudy_tr3000-v1)
	4. do whatever you need to setup OpenWRT for you **before** next step, do **not** forget about backups
2. Fibocom L850 Support
	1. ssh to your router
	2. you need to update (still a) `opkg` via `opkg update` 
	3. you need to install `modemmanager` and `luci-proto-modemmanager` via `opkg install modemmanager luci-proto-modemmanager`
	4. now reboot
	5. after reboot you'll need to execute `AT+GTUSBMODE=7` in a modem shell and then reboot once more
	6. and now you can setup connection via `modemmanager` !
3. Fibocom L850 alternative way
	1. instead of `modemmanager` we could use `openwrt.132lan.ru`'s packages and script.
	2. `opkg update` before everything
	3. now `wget -O /tmp/add.sh http://openwrt.132lan.ru/packages/24.10/packages/add.sh` and then `sh /tmp/add.sh`
	4. now we need to `opkg update` once more
	5. after that `luci-app-modeminfo`, `modeminfo`, `modeminfo-serial-xmm`, `modeminfo-serial-fibocom`, `luci-proto-xmm`, `xmm-modem`, `atinout` and `luci-app-atinout` will be available to install via `opkg install luci-app-modeminfo modeminfo modeminfo-serial-xmm modeminfo-serial-fibocom luci-proto-xmm xmm-modem atinout luci-app-atinout` 
	6. now reboot
	7. after that you'll be able to use `Intel XMM Cellular` as an Interface!

## Optional

> [!WARNING]
> 16MB of ROM

1. WireGuard:
	1. `opkg update`
	2. for cli-only `opkg install kmod-wireguard wireguard-tools`
	3. for luci usage `opkg install kmod-wireguard wireguard-tools luci-proto-wireguard` 
	4. reboot
	5. now you'll be able to use `Wireguard` as an Interface!

## Caveats

- no heatsink 
- USB 2.0 is not powerful enough for dual USB setup (USB thumb drive + USB Modem)
- 16MB of ROM (3rd time is a charm)

---