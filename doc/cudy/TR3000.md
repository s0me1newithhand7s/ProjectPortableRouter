<h1 align="center"> Cudy TR3000 </h1>

```Sh
.______            __  
|      |.--.--.-- |  |.--.--.  
|   ---||  |  | _ |  ||  |  | 
|______||_____|______||___  |  
. OpenWrt firmwares   |_____|
```

[OpenWRT page](https://openwrt.org/toh/cudy/tr3000)

<img src="https://www.cudy.com/cdn/shop/files/TR3000.png" width="500" align="center">

## Table of hardware

| Name      | Spec                                        |
| --------- | ------------------------------------------- |
| CPU       | MediaTek MT7981BA x 2 @ 1.3 GHz (Cortex-A53)|
| ROM       | 128MB (or 256MB) SPI NAND                   |
| RAM       | 512MB DDR3                                  |
| WLAN      | MediaTek MT7976CN (up to Wi-Fi 6)           |
| UBS       | + (3.0)                                     |
| Power     | PD 15W via USB Type-C                       |
| LAN       | 1x 2.5Gbps RTL8221B, 1x 1Gpbs MT7981BA      |
| Dimension | 15 by 15 by 10 cm                           |
|           |                                             |

## Short Description

little agile monster of networking (imho):
- 2.5gbps is nuts
- Wi-Fi 6 is nuts
- ONLY 15 watts for whole router
- small 
- MTK chipset, and even good one
- decent amount of ROM (you can use u-boot layout for more ROM btw)
- and 256MB version, comming soon(tm) on a stable OpenWRT (but you can build your own)

## How2

1. OpenWRT Transition 
	1. update [stock firmware](https://www.cudy.com/pages/download-center/tr3000-1-0) to latest version
	2. use special [Cudy Intermediary OpenWRT firmware](https://drive.google.com/drive/folders/1BKVarlwlNxf7uJUtRhuMGUqeCa5KpMnj?usp=sharing&pli=1) to sysupgrade to OpenWRT
	3. download latest stable build for your OpenWRT of choice (for e.g. https://firmware-selector.openwrt.org/?version=24.10.2&target=mediatek%2Ffilogic&id=cudy_tr3000-v1)
	4. do whatever you need to setup OpenWRT for you **before** next step, do **not** forget about backups
2. Fibocom L850 Support
	1. ssh to your router
	2. you need to update (still a) `opkg` via `opkg update` 
	3. you need to install `modemmanager` and `luci-proto-modemmanager` via `opkg install modemmanager luci-proto-modemmanager`
	4. now reboot
	5. after reboot you'll need to execute `AT+GTUSBMODE=7` in a modem shell and then reboot once more
	6. and now you can setup connection via `modemmanager` !
3. Fibocom L850 alternative way
	1. instead of `modemmanager` we could use `openwrt.132lan.ru`'s packages and script.
	2. `opkg update` before everything
	3. now `wget -O /tmp/add.sh http://openwrt.132lan.ru/packages/24.10/packages/add.sh` and then `sh /tmp/add.sh`
	4. now we need to `opkg update` once more
	5. after that `luci-app-modeminfo`, `modeminfo`, `modeminfo-serial-xmm`, `modeminfo-serial-fibocom`, `luci-proto-xmm`, `xmm-modem`, `atinout` and `luci-app-atinout` will be available to install via `opkg install luci-app-modeminfo modeminfo modeminfo-serial-xmm modeminfo-serial-fibocom luci-proto-xmm xmm-modem atinout luci-app-atinout` 
	6. now reboot
	7. after that you'll be able to use `Intel XMM Cellular` as an Interface!

## Optional

1. WireGuard:
	1. `opkg update`
	2. for cli-only `opkg install kmod-wireguard wireguard-tools`
	3. for luci usage `opkg install kmod-wireguard wireguard-tools luci-proto-wireguard` 
	4. reboot
	5. now you'll be able to use `Wireguard` as an Interface!
2. OpenVPN:
	1. not recommended since no official kmod for OVPN (yet)

## Caveats

none

---

p.s.
my current setup lmfao